import{j as e,L as p,r as n,a as u,H as b}from"./app-MeYs-BmF.js";import{L as j}from"./lock-CQuCxdWU.js";import{A as y,X as f}from"./app-layout-8z9wrsr-.js";import{b as x}from"./index-C06ndIyd.js";import{a as k}from"./button-BQLG2M-A.js";import"./index-BybtNFNq.js";import"./index-dEAx-CLm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],w=k("Printer",N);function v(){return e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-blue-400 bg-gradient-to-b from-blue-50 to-white p-8 text-center shadow-lg dark:border-blue-700 dark:from-blue-900/50 dark:to-gray-900",children:[e.jsx(j,{className:"mb-4 h-12 w-12 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"mb-4 text-xl font-bold text-blue-800 dark:text-blue-300",children:"Premium Access"}),e.jsx("p",{className:"mb-2 text-sm text-gray-700 dark:text-gray-300",children:"Dapatkan fitur eksklusif dan lihat ringkasan laporan bulanan lengkap."}),e.jsx("p",{className:"mb-4 text-xs text-gray-500 dark:text-gray-400",children:"Nikmati semua fitur premium tanpa batas"}),e.jsx(p,{className:"rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-3 text-lg font-semibold text-white shadow-md transition-all duration-300 hover:scale-105 hover:from-blue-700 hover:to-indigo-700",href:"/premium",children:"Upgrade Sekarang âœ¨"})]})}const L=[{title:"Keuangan",href:"/laporan-keuangan"},{title:"Laporan Bulanan",href:"#"}];function B({transactions:d}){const[r,c]=n.useState(null),[g,i]=n.useState(!1),{auth:m}=u().props,o=n.useMemo(()=>{const t=d.reduce((a,s)=>{const l=s.tanggal.slice(0,7);return a[l]||(a[l]={pemasukan:0,pengeluaran:0,transactions:[]}),s.jenis==="Pemasukan"?a[l].pemasukan+=s.jumlah:a[l].pengeluaran+=s.jumlah,a[l].transactions.push(s),a},{});return Object.entries(t).map(([a,s])=>({bulan:a,pemasukan:s.pemasukan,pengeluaran:s.pengeluaran,saldo:s.pemasukan-s.pengeluaran,details:s.transactions.sort((l,h)=>new Date(l.tanggal).getTime()-new Date(h.tanggal).getTime())})).sort((a,s)=>a.bulan<s.bulan?1:-1)},[d]);return e.jsxs(y,{breadcrumbs:L,children:[e.jsx(b,{title:"Laporan Keuangan"}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"no-print space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Laporan Keuangan Bulanan"}),m.user.is_premium?e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 bg-white p-4 shadow dark:border-gray-600 dark:bg-gray-800",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 dark:bg-gray-700/60 dark:text-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Bulan"}),e.jsx("th",{className:"p-2 text-left",children:"Pemasukan"}),e.jsx("th",{className:"p-2 text-left",children:"Pengeluaran"}),e.jsx("th",{className:"p-2 text-left",children:"Saldo"})]})}),e.jsxs("tbody",{children:[o.map((t,a)=>e.jsxs("tr",{className:`cursor-pointer ${a%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50"} hover:bg-gray-100 dark:hover:bg-gray-600/70`,onClick:()=>{c(t),i(!0)},children:[e.jsx("td",{className:"p-2",children:x(t.bulan)}),e.jsxs("td",{className:"p-2 text-green-600",children:["Rp ",t.pemasukan.toLocaleString("id-ID")]}),e.jsxs("td",{className:"p-2 text-red-600",children:["Rp ",t.pengeluaran.toLocaleString("id-ID")]}),e.jsxs("td",{className:"p-2 font-semibold",children:["Rp ",t.saldo.toLocaleString("id-ID")]})]},t.bulan)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Belum ada transaksi bulan ini"})})]})]})}):e.jsx(v,{})]})}),g&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"print-area relative w-full max-w-3xl rounded-xl border border-gray-200 bg-white p-6 shadow-2xl dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",children:[e.jsxs("div",{className:"no-print absolute top-4 right-4 flex gap-2",children:[e.jsx("a",{href:route("cetak-laporan",r.bulan),target:"_blank",className:"p-2 text-gray-500 transition hover:text-green-600",children:e.jsx(w,{size:20})}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 text-gray-500 transition hover:text-red-500",children:e.jsx(f,{size:20})})]}),e.jsxs("div",{className:"mb-4 border-b border-gray-200 pb-3 text-center dark:border-gray-600",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Detail Transaksi"}),e.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:x(r.bulan)})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 dark:bg-gray-700/60 dark:text-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Tanggal"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Jenis"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Deskripsi"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Jumlah"})]})}),e.jsx("tbody",{children:r.details.map((t,a)=>e.jsxs("tr",{className:a%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("td",{className:"px-3 py-2",children:t.tanggal}),e.jsx("td",{className:`px-3 py-2 font-medium ${t.jenis==="Pengeluaran"?"text-red-600":"text-green-600"}`,children:t.jenis}),e.jsx("td",{className:"px-3 py-2",children:t.deskripsi}),e.jsxs("td",{className:"px-3 py-2 text-right",children:["Rp ",t.jumlah.toLocaleString("id-ID")]})]},a))})]})}),e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4 text-sm dark:border-gray-600",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pemasukan:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["Rp ",r.pemasukan.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pengeluaran:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["Rp ",r.pengeluaran.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"mt-2 flex justify-between border-t border-gray-200 pt-2 dark:border-gray-600",children:[e.jsx("span",{className:"font-bold",children:"Saldo Akhir:"}),e.jsxs("span",{className:"font-bold",children:["Rp ",r.saldo.toLocaleString("id-ID")]})]})]})})})]})})]})}export{B as default};
